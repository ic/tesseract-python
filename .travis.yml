env:
  global:
    - REPO_DIR=tesseract-src
    - BUILD_COMMIT=215866151e774972c9502282111b998d7a053562
    - BUILD_DEPENDS=
    - TEST_DEPENDS=
    - PLAT=x86_64
    - UNICODE_WIDTH=32

language: python
python: 3.5
sudo: required
dist: trusty
services: docker

matrix:
  exclude:
    # Exclude the default Python 3.5 build
    - python: 3.5
  include:
    - os: linux
      env: MB_PYTHON_VERSION=2.7
  #    - os: linux
  #      env:
  #        - MB_PYTHON_VERSION=2.7
  #        - UNICODE_WIDTH=16
  #    - os: linux
  #      env:
  #        - MB_PYTHON_VERSION=2.7
  #        - PLAT=i686
  #    - os: linux
  #      env:
  #        - MB_PYTHON_VERSION=2.7
  #        - PLAT=i686
  #        - UNICODE_WIDTH=16
  #    - os: linux
  #      env:
  #        - MB_PYTHON_VERSION=3.3
  #    - os: linux
  #      env:
  #        - MB_PYTHON_VERSION=3.3
  #        - PLAT=i686
  #    - os: linux
  #      env:
  #        - MB_PYTHON_VERSION=3.4
  #    - os: linux
  #      env:
  #        - MB_PYTHON_VERSION=3.4
  #        - PLAT=i686
  #    - os: linux
  #      env:
  #        - MB_PYTHON_VERSION=3.5
  #    - os: linux
  #      env:
  #        - MB_PYTHON_VERSION=3.5
  #        - PLAT=i686
  #    - os: linux
  #      env:
  #        - MB_PYTHON_VERSION=3.6
  #    - os: linux
  #      env:
  #        - MB_PYTHON_VERSION=3.6
  #        - PLAT=i686
    - os: osx
      language: generic
      env:
        - MB_PYTHON_VERSION=2.7
  #    - os: osx
  #      language: generic
  #      env:
  #        - MB_PYTHON_VERSION=3.4
  #    - os: osx
  #      language: generic
  #      env:
  #        - MB_PYTHON_VERSION=3.5
  #    - os: osx
  #      language: generic
  #      env:
  #        - MB_PYTHON_VERSION=3.6
  #    - os: osx
  #      language: generic
  #      env:
  #        - MB_PYTHON_VERSION=pypy-5.7

before_install:
  - source multibuild/common_utils.sh
  - source multibuild/travis_steps.sh
  - before_install

install:
  - make wheel

script:
  - install_run $PLAT

after_success:
  - make distribute
